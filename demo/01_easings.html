<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <style type="text/css">
            .graph {
                display: inline-block;
                margin: 0 12px;
            }

            .graph h4 {
                font: normal normal normal 14px/18px Arial, Helvetica, sans-serif;
            }
        </style>
        <script src="../build/Ani.js"></script>
        <script type="text/javascript">
            var seq, el = function(e){return document.createElement(e)}, t = function(txt){return document.createTextNode(txt)},
                modes = [Ani.Constants.IN, Ani.Constants.IN_OUT, Ani.Constants.OUT];

            function createGraph(easingType, mode){
                const w = 213, h = 120, ph = 30;
                var container = el("div"), linear = new Ani.Easings.Linear(),
                    title, easing, canvas, ctx, mt;

                container.className = "graph";

                switch (mode){
                    case Ani.Constants.IN:
                        mt = "In"; break;
                    case Ani.Constants.IN_OUT:
                        mt = "In-Out"; break;
                    case Ani.Constants.OUT:
                        mt = "Out"; break;
                    default:
                        mt = "None"; break;
                }

                canvas = el("canvas");
                ctx = canvas.getContext("2d");
                easing = new Ani.Easings[easingType](mode);
                title = el("h4");
                title.appendChild(t(easingType+" easing, "+ mt));

                canvas.width = w;
                canvas.height = h;

                ctx.fillStyle = "#fbfbff";
                ctx.fillRect(0,0, w, h);
                ctx.lineWidth = 0.63;
                ctx.strokeStyle = "#eeeefe";

                ctx.beginPath();
                ctx.moveTo(0,ph);
                ctx.lineTo(w, ph);
                ctx.moveTo(0, h-ph);
                ctx.lineTo(w, h-ph);
                ctx.closePath();
                ctx.stroke();

                ctx.lineWidth = 2;
                ctx.strokeStyle = "#ff7f7f";

                var pos = {x: 5, y: h-ph},
                    _pos = {x: 5, y: h-ph};

                var ani1 = Ani.to({target: pos, targetFields: {x: w-5}, duration: 2, easing: linear})[0];
                var ani2 = Ani.to({target: pos, targetFields: {y: ph}, duration: 2, easing: easing, callback:{onUpdate: function(ani){
                    ctx.beginPath();
                    ctx.moveTo(_pos.x, _pos.y);
                    ctx.lineTo(pos.x, pos.y);
                    ctx.closePath();
                    ctx.stroke();

                    _pos.x = pos.x;
                    _pos.y = pos.y;
                }}})[0];

                //ani1.repeat();
                //ani2.repeat();

                seq.add(ani1);
                seq.add(ani2);

                container.appendChild(title);
                container.appendChild(canvas);
                return container;
            }

            function addGraphs(c, type){
                var l = el("div");
                l.appendChild(createGraph(type, modes[0]));
                l.appendChild(createGraph(type, modes[1]));
                l.appendChild(createGraph(type, modes[2]));
                c.appendChild(l);
            }

            window.onload = function(){
                var c = document.createElement("div"), l;
                document.body.appendChild(c);

                seq = new Ani.AniSequence();

                seq.beginSequence();
                seq.beginStep();

                l = el("div");
                l.appendChild(createGraph("Linear", modes[0]));
                c.appendChild(l);

                addGraphs(c, "Sine");
                addGraphs(c, "Expo");
                addGraphs(c, "Cubic");
                addGraphs(c, "Quad");
                addGraphs(c, "Quart");
                addGraphs(c, "Quint");
                addGraphs(c, "Circ");
                addGraphs(c, "Back");
                addGraphs(c, "Bounce");
                addGraphs(c, "Elastic");

                seq.endStep();
                seq.endSequence();
                seq.start();

                window.setInterval(draw, 1000/120);
            };

            function draw(){
                //requestAnimationFrame(draw);
                Ani.update();
            }
        </script>
    </head>
    <body>
    
    </body>
</html>